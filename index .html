<!DOCTYPE html>
<html lang="id">
<head <!-- Responsive untuk semua device -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#1a73e8">

<!-- Kompatibilitas browser -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<!-- SEO dasar -->
<meta name="description" content="Cek kesehatan harian dengan simulator dokter digital">
<meta name="keywords" content="kesehatan, dokter, cek kesehatan, konsultasi kesehatan">
<meta name="author" content="Nama Anda">

<!-- Ikon untuk berbagai platform -->
<link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="apple-touch-icon" href="apple-touch-icon.png">

<!-- Open Graph untuk sharing di sosial media -->
<meta property="og:title" content="Cek Kesehatan Harian">
<meta property="og:description" content="Simulator konsultasi dokter digital">
<meta property="og:image" content="https://yourwebsite.com/thumbnail.png">
<meta property="og:url" content="https://yourwebsite.com">>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cek Kesehatan Harian - Konsultasi Digital</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f0f9ff 0%, #e1f5fe 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 105, 180, 0.15);
            overflow: hidden;
        }

        header {
            background: linear-gradient(to right, #1a73e8, #0d47a1);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%2300b0ff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.1;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            position: relative;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
            position: relative;
        }

        .logo {
            font-size: 2.8rem;
            color: #ffeb3b;
        }

        .app-body {
            display: flex;
            flex-direction: column;
            min-height: 600px;
        }

        .section {
            padding: 30px;
            display: none;
        }

        .section.active {
            display: block;
        }

        .personal-data-section {
            background-color: #f9f9f9;
        }

        .question-section {
            background-color: #f9f9f9;
        }

        .summary-section {
            background-color: #f0f7ff;
        }

        .section-title {
            color: #0d47a1;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            border-color: #1a73e8;
            outline: none;
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 5px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .radio-option input {
            width: 18px;
            height: 18px;
        }

        .progress-container {
            margin: 30px 0;
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 12px;
            background-color: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #4caf50, #8bc34a);
            width: 0%;
            transition: width 0.5s ease;
        }

        .question-container {
            margin-bottom: 30px;
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .question {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #333;
            font-weight: 600;
        }

        .answer-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .answer-btn {
            padding: 12px 20px;
            background-color: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            flex: 1;
            min-width: 120px;
        }

        .answer-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }

        .answer-btn.active {
            background-color: #1a73e8;
            color: white;
            border-color: #0d47a1;
        }

        .scale-options {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .scale-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            max-width: 60px;
        }

        .scale-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: white;
            border: 2px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 5px;
        }

        .scale-btn:hover {
            transform: scale(1.1);
        }

        .scale-btn.active {
            background-color: #1a73e8;
            color: white;
            border-color: #0d47a1;
        }

        .scale-label {
            font-size: 0.8rem;
            text-align: center;
            color: #666;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .action-btn i {
            font-size: 1.2rem;
        }

        .next-btn, .submit-btn {
            background: linear-gradient(to right, #1a73e8, #0d47a1);
            color: white;
        }

        .prev-btn {
            background-color: #f5f5f5;
            color: #666;
        }

        .reset-btn {
            background-color: #ff9800;
            color: white;
        }

        .next-btn:hover, .submit-btn:hover {
            background: linear-gradient(to right, #0d47a1, #1a73e8);
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.1);
        }

        .prev-btn:hover {
            background-color: #e0e0e0;
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.1);
        }

        .reset-btn:hover {
            background-color: #f57c00;
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.1);
        }

        .summary-content {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
        }

        .patient-info-card {
            display: flex;
            background: linear-gradient(to right, #e3f2fd, #bbdefb);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            align-items: center;
            gap: 20px;
        }

        .patient-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #0d47a1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
        }

        .patient-details {
            flex: 1;
        }

        .patient-name {
            font-size: 1.8rem;
            font-weight: 700;
            color: #0d47a1;
            margin-bottom: 5px;
        }

        .patient-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            color: #555;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .health-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .health-card {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: transform 0.3s;
        }

        .health-card:hover {
            transform: translateY(-5px);
        }

        .health-card.primary {
            border-top: 5px solid #1a73e8;
        }

        .health-card.success {
            border-top: 5px solid #4caf50;
        }

        .health-card.warning {
            border-top: 5px solid #ff9800;
        }

        .health-card.danger {
            border-top: 5px solid #f44336;
        }

        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1rem;
            color: #666;
            margin-bottom: 10px;
        }

        .card-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .card-subtitle {
            font-size: 0.9rem;
            color: #888;
        }

        .chart-container {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .recommendations-container {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
        }

        .recommendations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .recommendation-card {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #4caf50;
        }

        .recommendation-card.warning {
            border-left-color: #ff9800;
        }

        .recommendation-card.danger {
            border-left-color: #f44336;
        }

        .rec-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #4caf50;
        }

        .rec-icon.warning {
            color: #ff9800;
        }

        .rec-icon.danger {
            color: #f44336;
        }

        .rec-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .rec-desc {
            color: #666;
            font-size: 0.95rem;
        }

        .warning-box {
            background-color: #fff3e0;
            border-left: 5px solid #ff9800;
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin-top: 30px;
        }

        .disclaimer {
            font-size: 0.9rem;
            color: #666;
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 120px;
            position: relative;
        }

        .step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 20px;
            right: -60px;
            width: 120px;
            height: 3px;
            background-color: #ddd;
            z-index: 1;
        }

        .step.active:not(:last-child)::after {
            background-color: #1a73e8;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #ddd;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
            z-index: 2;
            transition: all 0.3s;
        }

        .step.active .step-circle {
            background-color: #1a73e8;
            color: white;
            box-shadow: 0 0 0 5px rgba(26, 115, 232, 0.2);
        }

        .step.completed .step-circle {
            background-color: #4caf50;
            color: white;
        }

        .step-label {
            font-weight: 600;
            color: #999;
            font-size: 0.9rem;
        }

        .step.active .step-label {
            color: #1a73e8;
        }

        .step.completed .step-label {
            color: #4caf50;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .health-overview {
                grid-template-columns: 1fr;
            }
            
            .recommendations-grid {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            .answer-btn {
                min-width: 100px;
            }
            
            .step:not(:last-child)::after {
                display: none;
            }
            
            .step {
                width: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-heartbeat logo"></i> Cek Kesehatan Harian</h1>
            <p>Simulator konsultasi dokter digital untuk mengevaluasi kesehatan harian Anda</p>
        </header>
        
        <div class="step-indicator">
            <div class="step active" id="step1">
                <div class="step-circle">1</div>
                <div class="step-label">Data Pribadi</div>
            </div>
            <div class="step" id="step2">
                <div class="step-circle">2</div>
                <div class="step-label">Pertanyaan Kesehatan</div>
            </div>
            <div class="step" id="step3">
                <div class="step-circle">3</div>
                <div class="step-label">Hasil & Rekomendasi</div>
            </div>
        </div>
        
        <div class="app-body">
            <!-- Bagian Data Pribadi -->
            <section class="section personal-data-section active" id="personal-data-section">
                <h2 class="section-title"><i class="fas fa-user-circle"></i> Data Pribadi</h2>
                <p>Silakan isi data pribadi Anda terlebih dahulu untuk personalisasi hasil pemeriksaan.</p>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name"><i class="fas fa-user"></i> Nama Lengkap</label>
                        <input type="text" id="name" class="form-control" placeholder="Masukkan nama lengkap">
                    </div>
                    
                    <div class="form-group">
                        <label for="age"><i class="fas fa-birthday-cake"></i> Usia (tahun)</label>
                        <input type="number" id="age" class="form-control" placeholder="Contoh: 25" min="1" max="120">
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-venus-mars"></i> Jenis Kelamin</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="male" name="gender" value="Laki-laki">
                                <label for="male">Laki-laki</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="female" name="gender" value="Perempuan">
                                <label for="female">Perempuan</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="height"><i class="fas fa-ruler-vertical"></i> Tinggi Badan (cm)</label>
                        <input type="number" id="height" class="form-control" placeholder="Contoh: 170" min="50" max="250">
                    </div>
                    
                    <div class="form-group">
                        <label for="weight"><i class="fas fa-weight"></i> Berat Badan (kg)</label>
                        <input type="number" id="weight" class="form-control" placeholder="Contoh: 65" min="10" max="300">
                    </div>
                    
                    <div class="form-group">
                        <label for="blood-type"><i class="fas fa-tint"></i> Golongan Darah (opsional)</label>
                        <select id="blood-type" class="form-control">
                            <option value="">Pilih golongan darah</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="AB">AB</option>
                            <option value="O">O</option>
                        </select>
                    </div>
                </div>
                
                <div class="button-container">
                    <div></div> <!-- Spacer -->
                    <button class="action-btn next-btn" id="next-to-questions">
                        <i class="fas fa-arrow-right"></i> Lanjut ke Pertanyaan Kesehatan
                    </button>
                </div>
            </section>
            
            <!-- Bagian Pertanyaan Kesehatan -->
            <section class="section question-section" id="question-section">
                <h2 class="section-title"><i class="fas fa-stethoscope"></i> Pertanyaan Kesehatan</h2>
                <p>Jawab pertanyaan berikut untuk mengevaluasi kondisi kesehatan Anda hari ini.</p>
                
                <div class="progress-container">
                    <div class="progress-text">
                        <span>Progress Pengerjaan</span>
                        <span id="progress-count">0/10</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>
                
                <div id="questions-container">
                    <!-- Pertanyaan akan dimuat di sini melalui JavaScript -->
                </div>
                
                <div class="button-container">
                    <button class="action-btn prev-btn" id="prev-to-personal">
                        <i class="fas fa-arrow-left"></i> Kembali ke Data Pribadi
                    </button>
                    <button class="action-btn submit-btn" id="submit-btn">
                        <i class="fas fa-file-medical-alt"></i> Lihat Hasil Pemeriksaan
                    </button>
                </div>
            </section>
            
            <!-- Bagian Ringkasan Kesehatan -->
            <section class="section summary-section" id="summary-section">
                <h2 class="section-title"><i class="fas fa-clipboard-check"></i> Hasil Pemeriksaan Kesehatan</h2>
                
                <div class="patient-info-card" id="patient-info-card">
                    <!-- Data pasien akan dimuat di sini -->
                </div>
                
                <div class="health-overview" id="health-overview">
                    <!-- Ringkasan kesehatan akan dimuat di sini -->
                </div>
                
                <div class="chart-container">
                    <canvas id="healthChart"></canvas>
                </div>
                
                <div class="recommendations-container">
                    <h3 style="color: #0d47a1; margin-bottom: 20px;"><i class="fas fa-lightbulb"></i> Rekomendasi & Saran Kesehatan</h3>
                    <div class="recommendations-grid" id="recommendations-grid">
                        <!-- Rekomendasi akan dimuat di sini -->
                    </div>
                    
                    <div class="warning-box">
                        <p><i class="fas fa-exclamation-triangle"></i> <strong>Penting:</strong> Simulator ini hanya untuk tujuan informasi dan edukasi. Hasil yang diberikan tidak dimaksudkan sebagai diagnosis medis. Jika Anda mengalami gejala serius atau berkepanjangan, segera konsultasikan dengan dokter atau tenaga kesehatan profesional.</p>
                    </div>
                </div>
                
                <div class="button-container">
                    <button class="action-btn reset-btn" id="reset-app">
                        <i class="fas fa-redo"></i> Mulai Pemeriksaan Baru
                    </button>
                    <button class="action-btn prev-btn" id="prev-to-questions">
                        <i class="fas fa-arrow-left"></i> Kembali ke Pertanyaan
                    </button>
                </div>
                
                <div class="disclaimer">
                    <p><i class="fas fa-info-circle"></i> Informasi ini berdasarkan jawaban Anda dan tidak dimaksudkan sebagai saran medis profesional. Selalu konsultasikan dengan dokter untuk masalah kesehatan yang sesungguhnya.</p>
                </div>
            </section>
        </div>
    </div>

    <script>
        // Data pertanyaan kesehatan
        const healthQuestions = [
            {
                id: 1,
                question: "Apakah Anda mengalami demam atau peningkatan suhu tubuh?",
                type: "yesno",
                weight: 3,
                category: "Gejala Umum"
            },
            {
                id: 2,
                question: "Apakah Anda mengalami batuk atau sakit tenggorokan?",
                type: "yesno",
                weight: 2,
                category: "Gejala Pernapasan"
            },
            {
                id: 3,
                question: "Bagaimana tingkat kelelahan atau kelemahan yang Anda rasakan hari ini?",
                type: "scale",
                labels: ["Sangat Segar", "Cukup Segar", "Biasa Saja", "Agak Lelah", "Sangat Lelah"],
                weight: 2,
                category: "Tingkat Energi"
            },
            {
                id: 4,
                question: "Apakah Anda mengalami sesak napas atau kesulitan bernapas?",
                type: "yesno",
                weight: 3,
                category: "Gejala Pernapasan"
            },
            {
                id: 5,
                question: "Bagaimana kualitas tidur Anda tadi malam?",
                type: "scale",
                labels: ["Sangat Baik", "Cukup Baik", "Biasa Saja", "Tidak Nyenyak", "Sangat Buruk"],
                weight: 2,
                category: "Kualitas Tidur"
            },
            {
                id: 6,
                question: "Apakah Anda mengalami sakit kepala atau pusing?",
                type: "yesno",
                weight: 1,
                category: "Gejala Umum"
            },
            {
                id: 7,
                question: "Bagaimana nafsu makan Anda hari ini?",
                type: "scale",
                labels: ["Sangat Baik", "Cukup Baik", "Biasa Saja", "Agak Menurun", "Sangat Menurun"],
                weight: 1,
                category: "Nutrisi"
            },
            {
                id: 8,
                question: "Apakah Anda mengalami nyeri otot atau sendi?",
                type: "yesno",
                weight: 1,
                category: "Gejala Umum"
            },
            {
                id: 9,
                question: "Bagaimana tingkat stres yang Anda rasakan hari ini?",
                type: "scale",
                labels: ["Sangat Rendah", "Rendah", "Sedang", "Tinggi", "Sangat Tinggi"],
                weight: 2,
                category: "Kesehatan Mental"
            },
            {
                id: 10,
                question: "Apakah Anda memiliki riwayat penyakit kronis yang sedang kambuh?",
                type: "yesno",
                weight: 3,
                category: "Riwayat Kesehatan"
            }
        ];

        // Variabel global
        let userAnswers = {};
        let answeredCount = 0;
        let personalData = {};
        let healthChart = null;

        // Inisialisasi aplikasi
        document.addEventListener('DOMContentLoaded', function() {
            // Setup event listeners
            document.getElementById('next-to-questions').addEventListener('click', goToQuestions);
            document.getElementById('prev-to-personal').addEventListener('click', goToPersonalData);
            document.getElementById('submit-btn').addEventListener('click', showSummary);
            document.getElementById('reset-app').addEventListener('click', resetApp);
            document.getElementById('prev-to-questions').addEventListener('click', goBackToQuestions);
            
            // Render pertanyaan
            renderQuestions();
            updateProgress();
        });

        // Render pertanyaan ke dalam halaman
        function renderQuestions() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';
            
            healthQuestions.forEach(q => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                questionDiv.id = `question-${q.id}`;
                
                let optionsHTML = '';
                
                if (q.type === 'yesno') {
                    optionsHTML = `
                        <div class="answer-options">
                            <button class="answer-btn" data-question="${q.id}" data-value="yes">Ya</button>
                            <button class="answer-btn" data-question="${q.id}" data-value="no">Tidak</button>
                        </div>
                    `;
                } else if (q.type === 'scale') {
                    optionsHTML = `
                        <div class="scale-options">
                            ${q.labels.map((label, index) => `
                                <div class="scale-option">
                                    <button class="scale-btn" data-question="${q.id}" data-value="${index + 1}">${index + 1}</button>
                                    <span class="scale-label">${label}</span>
                                </div>
                            `).join('')}
                        </div>
                    `;
                }
                
                questionDiv.innerHTML = `
                    <div class="question">${q.id}. ${q.question}</div>
                    <div style="font-size: 0.9rem; color: #666; margin-bottom: 10px;">Kategori: ${q.category}</div>
                    ${optionsHTML}
                `;
                
                container.appendChild(questionDiv);
                
                // Tambahkan event listener untuk tombol jawaban
                if (q.type === 'yesno') {
                    questionDiv.querySelectorAll('.answer-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            selectAnswer(q.id, this.getAttribute('data-value'), this);
                        });
                    });
                } else if (q.type === 'scale') {
                    questionDiv.querySelectorAll('.scale-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            selectAnswer(q.id, parseInt(this.getAttribute('data-value')), this);
                        });
                    });
                }
            });
        }

        // Fungsi untuk memilih jawaban
        function selectAnswer(questionId, value, element) {
            // Reset kelas aktif pada semua opsi di pertanyaan ini
            const questionDiv = document.getElementById(`question-${questionId}`);
            
            if (healthQuestions.find(q => q.id === questionId).type === 'yesno') {
                questionDiv.querySelectorAll('.answer-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                element.classList.add('active');
            } else {
                questionDiv.querySelectorAll('.scale-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                element.classList.add('active');
            }
            
            // Simpan jawaban
            userAnswers[questionId] = {
                value: value,
                weight: healthQuestions.find(q => q.id === questionId).weight,
                category: healthQuestions.find(q => q.id === questionId).category
            };
            
            // Hitung jumlah jawaban yang sudah diisi
            answeredCount = Object.keys(userAnswers).length;
            updateProgress();
        }

        // Update progress bar
        function updateProgress() {
            const totalQuestions = healthQuestions.length;
            const progressPercent = (answeredCount / totalQuestions) * 100;
            
            document.getElementById('progress-count').textContent = `${answeredCount}/${totalQuestions}`;
            document.getElementById('progress-fill').style.width = `${progressPercent}%`;
        }

        // Navigasi ke bagian pertanyaan
        function goToQuestions() {
            // Validasi data pribadi
            if (!validatePersonalData()) {
                return;
            }
            
            // Simpan data pribadi
            savePersonalData();
            
            // Update step indicator
            document.getElementById('step1').classList.remove('active');
            document.getElementById('step1').classList.add('completed');
            document.getElementById('step2').classList.add('active');
            
            // Tampilkan bagian pertanyaan
            document.getElementById('personal-data-section').classList.remove('active');
            document.getElementById('question-section').classList.add('active');
            
            // Scroll ke atas
            window.scrollTo(0, 0);
        }

        // Kembali ke data pribadi
        function goToPersonalData() {
            // Update step indicator
            document.getElementById('step2').classList.remove('active');
            document.getElementById('step1').classList.add('active');
            document.getElementById('step1').classList.remove('completed');
            
            // Tampilkan bagian data pribadi
            document.getElementById('question-section').classList.remove('active');
            document.getElementById('personal-data-section').classList.add('active');
            
            // Scroll ke atas
            window.scrollTo(0, 0);
        }

        // Kembali ke pertanyaan dari ringkasan
        function goBackToQuestions() {
            // Update step indicator
            document.getElementById('step3').classList.remove('active');
            document.getElementById('step2').classList.add('active');
            
            // Tampilkan bagian pertanyaan
            document.getElementById('summary-section').classList.remove('active');
            document.getElementById('question-section').classList.add('active');
            
            // Scroll ke atas
            window.scrollTo(0, 0);
        }

        // Validasi data pribadi
        function validatePersonalData() {
            const name = document.getElementById('name').value.trim();
            const age = document.getElementById('age').value;
            const gender = document.querySelector('input[name="gender"]:checked');
            const height = document.getElementById('height').value;
            const weight = document.getElementById('weight').value;
            
            if (!name) {
                alert("Harap isi nama lengkap Anda.");
                document.getElementById('name').focus();
                return false;
            }
            
            if (!age || age < 1 || age > 120) {
                alert("Harap isi usia yang valid (1-120 tahun).");
                document.getElementById('age').focus();
                return false;
            }
            
            if (!gender) {
                alert("Harap pilih jenis kelamin.");
                return false;
            }
            
            if (!height || height < 50 || height > 250) {
                alert("Harap isi tinggi badan yang valid (50-250 cm).");
                document.getElementById('height').focus();
                return false;
            }
            
            if (!weight || weight < 10 || weight > 300) {
                alert("Harap isi berat badan yang valid (10-300 kg).");
                document.getElementById('weight').focus();
                return false;
            }
            
            return true;
        }

        // Simpan data pribadi
        function savePersonalData() {
            personalData = {
                name: document.getElementById('name').value.trim(),
                age: document.getElementById('age').value,
                gender: document.querySelector('input[name="gender"]:checked').value,
                height: document.getElementById('height').value,
                weight: document.getElementById('weight').value,
                bloodType: document.getElementById('blood-type').value
            };
            
            // Hitung IMT (Indeks Massa Tubuh)
            const heightInMeters = personalData.height / 100;
            personalData.bmi = (personalData.weight / (heightInMeters * heightInMeters)).toFixed(1);
            
            // Tentukan kategori IMT
            if (personalData.bmi < 18.5) {
                personalData.bmiCategory = "Kekurangan berat badan";
                personalData.bmiStatus = "warning";
            } else if (personalData.bmi < 25) {
                personalData.bmiCategory = "Normal (ideal)";
                personalData.bmiStatus = "success";
            } else if (personalData.bmi < 30) {
                personalData.bmiCategory = "Kelebihan berat badan";
                personalData.bmiStatus = "warning";
            } else {
                personalData.bmiCategory = "Obesitas";
                personalData.bmiStatus = "danger";
            }
        }

        // Tampilkan ringkasan kesehatan
        function showSummary() {
            // Validasi apakah semua pertanyaan sudah dijawab
            if (answeredCount < healthQuestions.length) {
                alert(`Harap jawab semua pertanyaan terlebih dahulu. Masih ada ${healthQuestions.length - answeredCount} pertanyaan yang belum dijawab.`);
                return;
            }
            
            // Update step indicator
            document.getElementById('step2').classList.remove('active');
            document.getElementById('step2').classList.add('completed');
            document.getElementById('step3').classList.add('active');
            
            // Hitung skor kesehatan
            const healthScore = calculateHealthScore();
            
            // Tampilkan data pasien
            displayPatientInfo();
            
            // Tampilkan ringkasan kesehatan
            displayHealthOverview(healthScore);
            
            // Tampilkan chart
            renderHealthChart(healthScore);
            
            // Tampilkan rekomendasi
            displayRecommendations(healthScore);
            
            // Tampilkan bagian ringkasan
            document.getElementById('question-section').classList.remove('active');
            document.getElementById('summary-section').classList.add('active');
            
            // Scroll ke atas
            window.scrollTo(0, 0);
        }

        // Hitung skor kesehatan
        function calculateHealthScore() {
            let totalScore = 0;
            let maxScore = 0;
            let categoryScores = {};
            
            healthQuestions.forEach(q => {
                const answer = userAnswers[q.id];
                let answerScore = 0;
                
                if (q.type === 'yesno') {
                    // Untuk pertanyaan ya/tidak, "ya" mengurangi kesehatan
                    answerScore = (answer.value === 'yes') ? q.weight * 2 : 0;
                } else if (q.type === 'scale') {
                    // Untuk pertanyaan skala, nilai tinggi mengurangi kesehatan (kecuali untuk pertanyaan positif)
                    const positiveQuestions = [3, 5, 7]; // Pertanyaan tentang tidur dan nafsu makan
                    
                    if (positiveQuestions.includes(q.id)) {
                        // Untuk pertanyaan positif, skala rendah lebih baik
                        answerScore = (answer.value - 1) * q.weight;
                    } else {
                        // Untuk pertanyaan negatif, skala tinggi lebih buruk
                        answerScore = answer.value * q.weight;
                    }
                }
                
                totalScore += answerScore;
                maxScore += q.weight * (q.type === 'yesno' ? 2 : 5);
                
                // Hitung skor per kategori
                if (!categoryScores[answer.category]) {
                    categoryScores[answer.category] = { score: 0, max: 0 };
                }
                categoryScores[answer.category].score += answerScore;
                categoryScores[answer.category].max += q.weight * (q.type === 'yesno' ? 2 : 5);
            });
            
            // Hitung persentase kesehatan
            const healthPercent = 100 - (totalScore / maxScore * 100);
            
            // Tentukan status kesehatan
            let healthStatus, healthStatusClass;
            if (healthPercent >= 80) {
                healthStatus = "Sangat Baik";
                healthStatusClass = "success";
            } else if (healthPercent >= 65) {
                healthStatus = "Baik";
                healthStatusClass = "success";
            } else if (healthPercent >= 50) {
                healthStatus = "Cukup";
                healthStatusClass = "warning";
            } else if (healthPercent >= 30) {
                healthStatus = "Perlu Perhatian";
                healthStatusClass = "warning";
            } else {
                healthStatus = "Kurang Baik";
                healthStatusClass = "danger";
            }
            
            // Hitung persentase per kategori
            const categoryPercentages = {};
            for (const category in categoryScores) {
                categoryPercentages[category] = 100 - (categoryScores[category].score / categoryScores[category].max * 100);
            }
            
            return {
                percentage: healthPercent,
                status: healthStatus,
                statusClass: healthStatusClass,
                categories: categoryPercentages
            };
        }

        // Tampilkan informasi pasien
        function displayPatientInfo() {
            const patientCard = document.getElementById('patient-info-card');
            const genderIcon = personalData.gender === 'Laki-laki' ? 'mars' : 'venus';
            const bloodTypeText = personalData.bloodType ? `Golongan Darah: ${personalData.bloodType}` : 'Golongan Darah: Tidak Diketahui';
            
            patientCard.innerHTML = `
                <div class="patient-avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="patient-details">
                    <div class="patient-name">${personalData.name}</div>
                    <div class="patient-meta">
                        <div class="meta-item"><i class="fas fa-${genderIcon}"></i> ${personalData.gender}, ${personalData.age} tahun</div>
                        <div class="meta-item"><i class="fas fa-ruler-vertical"></i> ${personalData.height} cm</div>
                        <div class="meta-item"><i class="fas fa-weight"></i> ${personalData.weight} kg</div>
                        <div class="meta-item"><i class="fas fa-heartbeat"></i> ${bloodTypeText}</div>
                    </div>
                </div>
            `;
        }

        // Tampilkan ringkasan kesehatan
        function displayHealthOverview(healthScore) {
            const overviewContainer = document.getElementById('health-overview');
            
            overviewContainer.innerHTML = `
                <div class="health-card primary">
                    <div class="card-icon"><i class="fas fa-heartbeat"></i></div>
                    <div class="card-title">Status Kesehatan</div>
                    <div class="card-value">${healthScore.status}</div>
                    <div class="card-subtitle">Skor: ${healthScore.percentage.toFixed(1)}%</div>
                </div>
                
                <div class="health-card ${personalData.bmiStatus}">
                    <div class="card-icon"><i class="fas fa-weight-scale"></i></div>
                    <div class="card-title">Indeks Massa Tubuh</div>
                    <div class="card-value">${personalData.bmi}</div>
                    <div class="card-subtitle">${personalData.bmiCategory}</div>
                </div>
                
                <div class="health-card success">
                    <div class="card-icon"><i class="fas fa-calendar-check"></i></div>
                    <div class="card-title">Usia</div>
                    <div class="card-value">${personalData.age}</div>
                    <div class="card-subtitle">tahun</div>
                </div>
                
                <div class="health-card ${personalData.bmiStatus === 'success' ? 'success' : 'warning'}">
                    <div class="card-icon"><i class="fas fa-balance-scale"></i></div>
                    <div class="card-title">Berat Badan</div>
                    <div class="card-value">${personalData.weight}</div>
                    <div class="card-subtitle">kg</div>
                </div>
            `;
        }

        // Render chart kesehatan
        function renderHealthChart(healthScore) {
            const ctx = document.getElementById('healthChart').getContext('2d');
            
            // Hancurkan chart sebelumnya jika ada
            if (healthChart) {
                healthChart.destroy();
            }
            
            // Siapkan data untuk chart
            const categories = Object.keys(healthScore.categories);
            const percentages = Object.values(healthScore.categories);
            
            // Tentukan warna berdasarkan nilai
            const backgroundColors = percentages.map(p => {
                if (p >= 80) return 'rgba(76, 175, 80, 0.7)';
                if (p >= 60) return 'rgba(255, 193, 7, 0.7)';
                return 'rgba(244, 67, 54, 0.7)';
            });
            
            const borderColors = percentages.map(p => {
                if (p >= 80) return 'rgba(76, 175, 80, 1)';
                if (p >= 60) return 'rgba(255, 193, 7, 1)';
                return 'rgba(244, 67, 54, 1)';
            });
            
            // Buat chart baru
            healthChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: categories,
                    datasets: [{
                        label: 'Skor Kesehatan per Kategori (%)',
                        data: percentages,
                        backgroundColor: backgroundColors,
                        borderColor: borderColors,
                        borderWidth: 2,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Analisis Kesehatan per Kategori',
                            font: {
                                size: 16
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            title: {
                                display: true,
                                text: 'Persentase Kesehatan'
                            }
                        }
                    }
                }
            });
        }

        // Tampilkan rekomendasi
        function displayRecommendations(healthScore) {
            const recommendationsGrid = document.getElementById('recommendations-grid');
            let recommendations = [];
            
            // Rekomendasi berdasarkan skor kesehatan keseluruhan
            if (healthScore.percentage >= 80) {
                recommendations.push({
                    title: "Pertahankan Gaya Hidup Sehat",
                    description: "Kondisi kesehatan Anda sangat baik. Pertahankan pola makan sehat, olahraga teratur, dan istirahat yang cukup.",
                    icon: "fa-check-circle",
                    type: "success"
                });
                
                recommendations.push({
                    title: "Tetap Terhidrasi",
                    description: "Minum air putih minimal 8 gelas per hari untuk menjaga metabolisme tubuh.",
                    icon: "fa-tint",
                    type: "success"
                });
            } else if (healthScore.percentage >= 65) {
                recommendations.push({
                    title: "Tingkatkan Istirahat",
                    description: "Pastikan Anda mendapatkan tidur yang cukup (7-8 jam per malam) untuk pemulihan tubuh.",
                    icon: "fa-bed",
                    type: "warning"
                });
                
                recommendations.push({
                    title: "Perbaiki Pola Makan",
                    description: "Perbanyak konsumsi buah, sayuran, dan protein untuk meningkatkan energi.",
                    icon: "fa-apple-alt",
                    type: "warning"
                });
            } else if (healthScore.percentage >= 50) {
                recommendations.push({
                    title: "Kurangi Aktivitas Berat",
                    description: "Sementara waktu, hindari aktivitas fisik berat dan beristirahatlah lebih banyak.",
                    icon: "fa-running",
                    type: "warning"
                });
                
                recommendations.push({
                    title: "Pantau Gejala",
                    description: "Perhatikan gejala yang muncul. Jika tidak membaik dalam 2-3 hari, pertimbangkan untuk berkonsultasi dengan dokter.",
                    icon: "fa-clipboard-list",
                    type: "warning"
                });
            } else {
                recommendations.push({
                    title: "Istirahat Total",
                    description: "Sangat disarankan untuk beristirahat total dan mengurangi semua aktivitas yang melelahkan.",
                    icon: "fa-procedures",
                    type: "danger"
                });
                
                recommendations.push({
                    title: "Konsultasi Medis",
                    description: "Segera konsultasikan dengan dokter untuk evaluasi lebih lanjut tentang kondisi Anda.",
                    icon: "fa-user-md",
                    type: "danger"
                });
            }
            
            // Rekomendasi berdasarkan IMT
            if (personalData.bmiStatus === "warning" || personalData.bmiStatus === "danger") {
                recommendations.push({
                    title: "Kelola Berat Badan",
                    description: `IMT Anda (${personalData.bmi}) menunjukkan ${personalData.bmiCategory}. Pertimbangkan untuk berkonsultasi dengan ahli gizi.`,
                    icon: "fa-weight-scale",
                    type: personalData.bmiStatus
                });
            }
            
            // Rekomendasi berdasarkan usia
            if (personalData.age > 50) {
                recommendations.push({
                    title: "Pemeriksaan Rutin",
                    description: "Pada usia Anda, disarankan untuk melakukan pemeriksaan kesehatan rutin setidaknya setahun sekali.",
                    icon: "fa-calendar-alt",
                    type: "warning"
                });
            }
            
            // Render rekomendasi
            recommendationsGrid.innerHTML = recommendations.map(rec => `
                <div class="recommendation-card ${rec.type}">
                    <div class="rec-icon ${rec.type}"><i class="fas ${rec.icon}"></i></div>
                    <div class="rec-title">${rec.title}</div>
                    <div class="rec-desc">${rec.description}</div>
                </div>
            `).join('');
        }

        // Reset seluruh aplikasi
        function resetApp() {
            // Reset data
            userAnswers = {};
            answeredCount = 0;
            personalData = {};
            
            // Reset form data pribadi
            document.getElementById('name').value = '';
            document.getElementById('age').value = '';
            document.querySelectorAll('input[name="gender"]').forEach(radio => radio.checked = false);
            document.getElementById('height').value = '';
            document.getElementById('weight').value = '';
            document.getElementById('blood-type').value = '';
            
            // Reset pertanyaan
            renderQuestions();
            updateProgress();
            
            // Reset step indicator
            document.getElementById('step1').classList.add('active');
            document.getElementById('step1').classList.remove('completed');
            document.getElementById('step2').classList.remove('active');
            document.getElementById('step2').classList.remove('completed');
            document.getElementById('step3').classList.remove('active');
            
            // Tampilkan bagian data pribadi
            document.getElementById('summary-section').classList.remove('active');
            document.getElementById('question-section').classList.remove('active');
            document.getElementById('personal-data-section').classList.add('active');
            
            // Hancurkan chart jika ada
            if (healthChart) {
                healthChart.destroy();
                healthChart = null;
            }
            
            // Scroll ke atas
            window.scrollTo(0, 0);
            
            alert("Aplikasi telah direset. Silakan mulai pemeriksaan baru.");
        }
    </script>
</body>
</html>